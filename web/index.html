<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Voting System</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header>
      <h1>AI Voting System</h1>
      <div class="controls" style="justify-content:center;">
        <button id="font-dec" title="Smaller text">A-</button>
        <button id="font-inc" title="Larger text">A+</button>
        <button id="btn-kiosk" title="Enter fullscreen kiosk mode">Kiosk Mode</button>
      </div>
    </header>

    <main>
      <section class="panel">
        <h2>Voting System</h2>
        <div class="wizard">
          <div class="steps">
            <div class="step active" data-step="0">1. Login</div>
            <div class="step" data-step="1">2. Identify</div>
            <div class="step" data-step="2">3. Capture Face (New)</div>
            <div class="step" data-step="3">4. Verify/Details</div>
            <div class="step" data-step="4">5. Choose</div>
            <div class="step" data-step="5">6. Confirm</div>
          </div>
          <div class="step-content" id="step-0">
            <p>Please login to access the voting system.</p>
            <div class="row">
              <label for="voter-id">Voter ID</label>
              <input id="voter-id" placeholder="Enter your voter ID" />
            </div>
            <div class="row">
              <label for="voter-password">Password</label>
              <input id="voter-password" type="password" placeholder="Enter your password" />
            </div>
            <div class="controls">
              <button id="btn-login">Login</button>
              <small id="login-status"></small>
            </div>
          </div>
          <div class="step-content" id="step-1" hidden>
            <p>Center your face in the frame and press Identify.</p>
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas" width="640" height="480" hidden></canvas>
            <div class="controls">
              <button id="btn-predict">Identify</button>
              <span class="muted">Detected ID:</span> <strong id="label">-</strong>
            </div>
          </div>
          <div class="step-content" id="step-2" hidden>
            <p>New users: capture your face first.</p>
            <video id="video-reg" autoplay playsinline muted></video>
            <div class="row">
              <label for="framesTotal">Frames to collect (max 5)</label>
              <input id="framesTotal" type="number" value="5" min="1" max="5" />
            </div>
            <div class="row">
              <label for="everyN">Capture every N frames</label>
              <input id="everyN" type="number" value="2" min="1" max="10" />
            </div>
            <div class="controls">
              <button id="btn-capture-faces">Capture Faces</button>
              <small id="reg-status"></small>
            </div>
            <div class="controls">
              <button id="to-step-3" disabled>Next: Enter Details</button>
            </div>
          </div>

          <div class="step-content" id="step-3" hidden>
            <p>Verify your details from the registry.</p>
            <div class="row">
              <label for="aadhar">Aadhar number</label>
              <input id="aadhar" placeholder="Enter aadhar" />
            </div>
            <div class="row">
              <label for="name">Name</label>
              <input id="name" placeholder="Enter your name" />
            </div>
            <div class="row" id="age-display" style="display: none;">
              <label>Age from Registry:</label>
              <span id="registry-age" style="font-weight: bold; color: #16a34a;"></span>
            </div>
            <div class="controls">
              <button id="btn-register">Submit Registration</button>
            </div>
            <div class="controls">
              <button id="btn-next-3">Continue</button>
            </div>
          </div>
          <div class="step-content" id="step-4" hidden>
            <p>Select your party.</p>
            <div class="row">
              <label for="party">Party</label>
              <select id="party"></select>
            </div>
            <div class="controls">
              <button id="btn-next-4">Continue</button>
            </div>
          </div>
          <div class="step-content" id="step-5" hidden>
            <p>Review your selection and submit.</p>
            <div class="row"><strong>ID:</strong> <span id="confirm-id">-</span></div>
            <div class="row"><strong>Name:</strong> <span id="confirm-name">-</span></div>
            <div class="row"><strong>Party:</strong> <span id="confirm-party">-</span></div>
            <div class="row" id="captured-face-container" style="display: none;">
              <strong>Captured Face:</strong>
              <img id="captured-face" style="max-width: 200px; max-height: 200px; border: 2px solid #ccc; border-radius: 8px; margin-top: 10px;" />
            </div>
            <div class="controls">
              <button id="btn-back-5">Back</button>
              <button id="btn-vote">Submit Vote</button>
              <small id="vote-status"></small>
            </div>
          </div>
        </div>
      </section>

      <section class="panel">
        <h2>Help</h2>
        <p>
          Follow the steps. 
          If face ID fails
          you can type your Aadhar and proceed.</p>
        <div class="controls">
          <button id="btn-logout">Logout</button>
        </div>
      </section>

    </main>

    

    <script src="/app.js"></script>
    <div id="toasts"></div>
  </body>
  </html>


